# GMR Mosaic AI Demo - Vector Search Index Configuration

resources:
  # Note: Vector Search endpoints and indexes are typically created via API/SDK
  # This file documents the expected configuration for reference
  # Actual creation is done in 04_vector_index.py notebook

  # Vector Search Endpoint (managed)
  # Endpoint Name: gmr-vector-search-endpoint
  # Type: STANDARD (managed endpoint)

  # Vector Search Index Configuration
  # Index: gmr_demo.royalties.song_metadata_index
  # Source Table: gmr_demo.royalties.song_metadata_embeddings
  # Primary Key: song_id
  # Embedding Column: embedding
  # Embedding Dimension: 1024 (databricks-gte-large-en)
  # Sync Mode: TRIGGERED

  # Schema for source table (song_metadata_embeddings):
  # - song_id: STRING (primary key)
  # - title: STRING
  # - artist_name: STRING
  # - songwriter_names: STRING
  # - genre: STRING
  # - publisher: STRING
  # - metadata_text: STRING (concatenated searchable text)
  # - embedding: ARRAY<FLOAT> (1024 dimensions)

# Custom resources section for documentation
custom:
  vector_search:
    endpoint_name: "gmr-vector-search-endpoint"
    index_name: "${var.catalog}.${var.schema}.song_metadata_index"
    source_table: "${var.catalog}.${var.schema}.song_metadata_embeddings"
    embedding_model: "databricks-gte-large-en"
    embedding_dimension: 1024
    primary_key: "song_id"
    embedding_column: "embedding"
    text_column: "metadata_text"
    sync_computed_embeddings: false
